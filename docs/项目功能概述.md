# 星星存折 (Star Savings) - 项目功能概述

## 项目简介

星星存折是一个面向3-10岁儿童的家庭奖励系统，通过星星积分激励孩子的良好行为。系统采用现代化的全栈架构，提供流畅的用户体验和丰富的动画效果。

## 系统架构

### 技术选型

#### 前端技术栈
- **框架**: Vue 3.5.18 (Composition API)
- **构建工具**: Vite 7.0
- **开发语言**: TypeScript
- **UI样式**: Tailwind CSS 4.0
- **动画库**: Anime.js 4.2.2
- **HTTP客户端**: Axios

#### 后端技术栈
- **框架**: FastAPI (Python 3.11+)
- **数据库**: SQLite/MySQL
- **ORM**: SQLAlchemy
- **API规范**: RESTful
- **验证**: Pydantic
- **迁移工具**: Alembic

#### 部署方案
- Docker容器化
- Docker Compose编排
- Nginx反向代理

## 核心功能模块

### 1. 用户认证与权限管理

#### 登录系统
- **儿童登录**: 简化的登录界面，只需选择头像或输入简单密码
- **家长登录**: 完整的账号密码登录，支持多因素认证
- **权限分离**: 
  - 儿童端：只读权限，查看自己的星星、奖品进度、成就
  - 家长端：完全管理权限，可以操作所有功能

#### 账户管理
- **家长账户**: 可创建多个子账户，设置不同权限级别
- **儿童账户**: 与小朋友信息绑定，自动继承查看权限
- **安全设置**: 密码强度要求、登录日志、异常提醒

### 2. 小朋友管理模块

#### 功能列表
- **添加小朋友**: 录入姓名、生日、性别、头像、登录密码
- **查看列表**: 展示所有小朋友的卡片式列表
- **详情页面**: 查看个人信息、星星数量、历史记录、成长曲线
- **编辑信息**: 修改基本信息和头像
- **删除功能**: 支持删除小朋友账户
- **权限设置**: 配置每个小朋友的登录权限

#### 特色功能
- 头像上传与预览
- 生日自动计算年龄
- 星星数量实时显示
- 响应式卡片布局

### 3. 星星积分系统

#### 核心操作
- **加星星**: 奖励良好行为，支持批量添加
- **减星星**: 扣除星星（惩罚或消费）
- **快速操作**: 基于预设项目的一键加减分
- **星星记录**: 完整的加减历史记录，包含日期时间
- **实时统计**: 当前星星总数自动计算
- **批量操作**: 支持多个小朋友同时加减星星

#### 记录管理
- **详细记录**: 每次操作都记录时间、原因、操作人
- **历史查询**: 按日期、类型、小朋友筛选记录
- **记录导出**: 支持导出Excel或PDF格式
- **操作撤销**: 管理员可撤销错误操作

#### 动画效果
- 加星动画：星星飞入效果 + 数字跳动
- 减星动画：星星飞出消失效果
- 数字变化：平滑过渡动画

### 4. 项目管理系统（新增）

#### 项目配置
- **预设项目**: 家长创建常用的加分/扣分项目
- **分值设置**: 每个项目设置固定的星星分值
- **分类管理**: 按类别组织项目（学习、生活、运动等）
- **启用控制**: 可临时禁用某些项目

#### 项目类型
- **加分项目**: 
  - 完成作业（+5星）
  - 帮助家务（+3星）
  - 运动锻炼（+2星）
  - 阅读书籍（+4星）
- **扣分项目**:
  - 不按时睡觉（-2星）
  - 挑食（-1星）
  - 不完成作业（-5星）

#### 使用方式
- **快速选择**: 在加减星星时直接选择预设项目
- **自动填充**: 选择项目后自动填入分值和原因
- **批量应用**: 一个项目可同时应用给多个小朋友
- **历史统计**: 查看每个项目的使用频率

### 5. 奖品管理系统

#### 功能特性
- **创建奖品**: 设置名称、图片、所需星星数
- **多人共享**: 一个奖品可绑定多个小朋友
- **进度展示**: 星星堆叠式进度条
- **分类管理**: 按小朋友筛选奖品
- **状态管理**: 未兑换/已兑换状态

#### 视觉设计
- 奖品卡片展示
- 进度百分比显示
- 星星堆叠动画
- 响应式网格布局

### 6. 兑换系统

#### 兑换流程
1. 选择要兑换的奖品
2. 编辑每个小朋友的扣除星星数
3. 确认兑换并执行扣除
4. 播放庆祝动画

#### 特色功能
- **灵活分配**: 自定义每人扣除数量
- **智能计算**: 自动分配建议值
- **安全校验**: 余额不足提醒
- **事务处理**: 确保数据一致性

#### 动画效果
- 烟花庆祝动画
- 五彩纸屑效果
- 卡片翻转动画
- 成功提示弹窗

### 7. 管理后台（新增）

#### 家长管理中心
- **仪表盘**: 所有小朋友的数据概览
- **批量管理**: 同时管理多个小朋友
- **权限控制**: 设置不同家长的管理权限
- **操作日志**: 查看所有管理操作记录

#### 管理功能
- **小朋友管理**: 
  - 批量添加/编辑小朋友信息
  - 设置每个小朋友的目标和规则
  - 查看详细的成长报告
- **项目管理**:
  - 创建和编辑加分/扣分项目
  - 设置项目的使用规则
  - 项目使用统计分析
- **奖品管理**:
  - 批量创建奖品
  - 设置奖品的兑换规则
  - 库存管理（如果是实物奖品）
- **数据管理**:
  - 数据导入导出
  - 数据备份恢复
  - 批量数据清理

### 8. 数据分析与报表（新增）

#### 每日总结
- **自动生成**: 每天自动生成当日总结报告
- **内容包含**:
  - 每个小朋友的星星变化
  - 完成的任务和项目
  - 表现优秀和需要改进的地方
- **通知推送**: 通过邮件或APP推送每日总结

#### 数据图表
- **星星趋势图**: 展示星星数量的变化趋势
- **行为分析**: 分析加分/扣分的原因分布
- **对比图表**: 多个小朋友的对比分析
- **成长曲线**: 长期的成长轨迹展示

#### 统计报表
- **周报/月报**: 定期生成统计报表
- **排行榜**: 星星数量、任务完成等排行
- **成就统计**: 获得成就和奖品的统计
- **导出功能**: 支持PDF、Excel格式导出

### 9. 移动端适配（新增）

#### 儿童端APP
- **简化界面**: 大图标、少文字的设计
- **互动元素**: 动画效果、音效反馈
- **查看功能**: 
  - 我的星星
  - 可兑换奖品
  - 成就展示
  - 排行榜
- **游戏化**: 添加小游戏元素增加趣味性

#### 家长端APP  
- **远程管理**: 随时随地管理孩子的星星
- **实时通知**: 重要事件推送提醒
- **快速操作**: 常用功能快捷入口
- **数据同步**: 与Web端实时同步

## 用户界面设计

### 设计理念
- **图标优先**: 减少文字，使用直观图标
- **大按钮设计**: 适合儿童操作
- **鲜艳配色**: 吸引儿童注意力
- **动画反馈**: 每个操作都有视觉反馈

### 响应式适配
- iPad横屏/竖屏优化
- 手机端自适应布局
- 触摸友好的交互
- 弹性盒子布局

### 页面结构
1. **首页**: 小朋友列表 + 快速操作
2. **详情页**: 个人中心 + 历史记录
3. **奖品页**: 奖品展示 + 兑换入口
4. **弹窗系统**: 表单操作 + 确认对话框

## 数据管理

### 数据库设计

#### children (小朋友表)
- id: 主键
- name: 姓名
- birthday: 生日
- gender: 性别
- avatar: 头像URL
- star_count: 星星总数（冗余字段，提高查询性能）

#### star_records (星星记录表)
- id: 主键
- child_id: 关联小朋友
- amount: 变动数量
- type: 操作类型 (add/subtract/redeem)
- reason: 变动原因
- reward_id: 兑换时的奖品ID
- created_at: 操作时间

#### rewards (奖品表)
- id: 主键
- name: 奖品名称
- image: 奖品图片
- required_stars: 所需星星数
- description: 奖品描述
- is_redeemed: 兑换状态
- redeemed_at: 兑换时间

#### reward_children (关联表)
- reward_id: 奖品ID
- child_id: 小朋友ID
- deduction_amount: 实际扣除数量

### 事务处理
- 星星变动采用事务机制
- 确保记录与余额同步
- 兑换操作的原子性保证
- 数据一致性维护

## API接口设计

### 接口规范
- RESTful风格设计
- JSON数据格式
- 统一错误处理
- 分页与过滤支持

### 主要接口分类
1. 小朋友管理接口 (/api/children)
2. 星星操作接口 (/api/children/{id}/stars)
3. 奖品管理接口 (/api/rewards)
4. 兑换操作接口 (/api/rewards/{id}/redeem)
5. 文件上传接口 (/api/upload)

## 部署与运维

### 容器化部署
- 前端Nginx容器
- 后端FastAPI容器
- 数据库持久化卷
- 网络互联配置

### 开发环境
- 热重载支持
- 调试日志输出
- CORS跨域配置
- Mock数据支持

### 生产环境
- 性能优化配置
- 日志轮转机制
- 备份恢复策略
- 监控告警系统

## 未来规划

### 功能扩展
- **AI智能助手**: 基于行为数据提供教育建议
- **社交功能**: 家庭间的互动和经验分享
- **任务市场**: 共享优秀的任务和项目模板
- **虚拟宠物**: 星星可以用来养成虚拟宠物
- **教育资源**: 集成教育内容和学习资源
- **多语言支持**: 支持多种语言界面

### 技术优化
- **性能优化**: 数据库查询优化、CDN加速
- **实时通信**: WebSocket实现实时数据同步
- **微服务架构**: 拆分为独立的微服务
- **区块链**: 星星积分的去中心化存储
- **机器学习**: 行为模式识别和预测
- **PWA支持**: 渐进式Web应用
